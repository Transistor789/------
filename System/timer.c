#include "timer.h"

void timer_init() // @11.0592MHz 1ms
{ // 机器周期 = 12 / f = 1.085us
    TMOD |= 0x01; // 定时器0、工作方式1(16位寄存器)
    // 配置初值 初值 = (65536 - 1ms / 1.085us)
    TH0 = (65536 - 922) / 256; // 高8位
    TL0 = (65536 - 922) % 256; // 低8位
    // 三个使能开关
    ET0 = 1;// 中断源使能
    TR0 = 1;// 定时器0使能
    EA = 1; // 总中断
}